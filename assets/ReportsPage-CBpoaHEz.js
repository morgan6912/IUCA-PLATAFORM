import{e as i,j as e,J as u}from"./index-C4aqFuzc.js";const h=l=>{const c=[];return l.modulo.materias.forEach(a=>{const n=Object.entries(a.horario).map(([d,o])=>`${d}: ${o}`).join(" - ");c.push(`${a.clave} ${a.nombre} (${n})`)}),c.join(" | ")},N=()=>{const[l,c]=i.useState([]),[a,n]=i.useState(!0);i.useEffect(()=>{(async()=>{n(!0);try{const t=await u();c(t)}finally{n(!1)}})()},[]);const d=l.length,o=l.reduce((s,t)=>{var r;return s+(((r=t.studentIds)==null?void 0:r.length)||0)},0),p=d?Math.round(o/d):0,x=[...l].sort((s,t)=>{var r,m;return(((r=t.studentIds)==null?void 0:r.length)||0)-(((m=s.studentIds)==null?void 0:m.length)||0)}).slice(0,5);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"space-y-4",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400",children:"Docentes | Instituto Universitario de Ciencias Ambientales"}),e.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Reportes de modulos"}),e.jsx("p",{className:"text-sm text-slate-500 max-w-2xl",children:"Datos en vivo desde la base de datos: modulos asignados, docentes responsables y estudiantes inscritos."})]}),e.jsxs("section",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Modulos activos"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900",children:a?"...":d}),e.jsx("p",{className:"text-sm text-slate-500",children:"Asignaciones registradas"})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Estudiantes vinculados"}),e.jsx("p",{className:"text-3xl font-bold text-emerald-700",children:a?"...":o}),e.jsx("p",{className:"text-sm text-slate-500",children:"Suma de inscritos por modulo"})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Promedio por modulo"}),e.jsx("p",{className:"text-3xl font-bold text-blue-700",children:a?"...":p}),e.jsx("p",{className:"text-sm text-slate-500",children:"Estudiantes promedio por modulo"})]})]}),e.jsxs("section",{className:"grid gap-6 lg:grid-cols-[1.1fr_0.9fr]",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Top inscripcion"}),e.jsx("h2",{className:"text-2xl font-semibold text-slate-800",children:"Modulos con mas estudiantes"})]}),e.jsxs("span",{className:"text-xs text-slate-500",children:[x.length," modulos"]})]}),a?e.jsx("p",{className:"mt-4 text-sm text-slate-500",children:"Cargando..."}):x.length===0?e.jsx("p",{className:"mt-4 text-sm text-slate-500",children:"No hay modulos registrados."}):e.jsx("div",{className:"mt-4 space-y-3",children:x.map(s=>e.jsxs("article",{className:"rounded-2xl border border-slate-100 bg-slate-50 p-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-800",children:s.modulo.nombre}),e.jsxs("p",{className:"text-xs text-slate-500",children:[s.modulo.codigo," - ",s.profesorNombre]})]}),e.jsxs("div",{className:"text-right text-xs text-slate-500",children:[e.jsx("p",{className:"uppercase tracking-[0.3em]",children:"Inscritos"}),e.jsx("p",{className:"text-sm font-semibold text-slate-800",children:(s.studentIds||[]).length})]})]}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:h(s)})]},s.id))})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Docentes"}),e.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Carga por profesor"})]}),e.jsx("span",{className:"text-xs text-slate-500",children:"Datos reales"})]}),a?e.jsx("p",{className:"mt-4 text-sm text-slate-500",children:"Cargando..."}):e.jsx("ul",{className:"mt-4 space-y-3",children:Object.entries(l.reduce((s,t)=>{var r;return s[t.profesorNombre]||(s[t.profesorNombre]={count:0,students:0}),s[t.profesorNombre].count+=1,s[t.profesorNombre].students+=((r=t.studentIds)==null?void 0:r.length)||0,s},{})).sort((s,t)=>t[1].count-s[1].count).map(([s,t])=>e.jsxs("li",{className:"rounded-2xl border border-slate-100 bg-slate-50 px-4 py-3",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-800",children:s||"Sin nombre"}),e.jsxs("p",{className:"text-xs text-slate-600",children:["Modulos: ",t.count," - Estudiantes: ",t.students]})]},s))})]})]}),e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Listado completo"}),e.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Modulos registrados"})]}),e.jsxs("span",{className:"text-xs text-slate-500",children:["Total: ",a?"...":d]})]}),e.jsx("div",{className:"mt-4 max-h-[420px] overflow-y-auto rounded-2xl border border-slate-100",children:a?e.jsx("p",{className:"p-4 text-sm text-slate-500",children:"Cargando..."}):l.length===0?e.jsx("p",{className:"p-4 text-sm text-slate-500",children:"No hay modulos en la base de datos."}):e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs uppercase tracking-[0.3em] text-slate-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Modulo"}),e.jsx("th",{className:"px-4 py-3",children:"Docente"}),e.jsx("th",{className:"px-4 py-3",children:"Inscritos"}),e.jsx("th",{className:"px-4 py-3",children:"Horario"})]})}),e.jsx("tbody",{children:l.map(s=>e.jsxs("tr",{className:"border-t border-slate-100",children:[e.jsxs("td",{className:"px-4 py-3 font-medium text-slate-800",children:[e.jsx("div",{children:s.modulo.nombre}),e.jsx("p",{className:"text-xs text-slate-500",children:s.modulo.codigo})]}),e.jsx("td",{className:"px-4 py-3 text-slate-600",children:s.profesorNombre}),e.jsx("td",{className:"px-4 py-3 text-slate-600",children:(s.studentIds||[]).length}),e.jsx("td",{className:"px-4 py-3 text-slate-600",children:h(s)})]},s.id))})]})})]})]})};export{N as default};
