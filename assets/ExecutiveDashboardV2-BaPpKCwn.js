import{e as c,R as t,j as e}from"./index-C4aqFuzc.js";import{l as w}from"./userService-DLJmcfev.js";import"./authService-BRFCedW7.js";const j={[t.ESTUDIANTE]:"Estudiantes",[t.DOCENTE]:"Docentes",[t.ADMINISTRATIVO]:"Administrativos",[t.DIRECTIVO]:"Directivos",[t.BIBLIOTECARIO]:"Bibliotecarios"},o=r=>{const n=String(r??"").trim().toLowerCase();return Object.values(t).includes(n)?n:t.ESTUDIANTE},R=()=>{const[r,n]=c.useState([]),[m,N]=c.useState(!0),[h,p]=c.useState("");c.useEffect(()=>{let s=!0;return w().then(l=>{s&&(n(l),p(""))}).catch(()=>{s&&p("No se pudo cargar la informacion institucional.")}).finally(()=>{s&&N(!1)}),()=>{s=!1}},[]);const a=c.useMemo(()=>{const s=r.reduce((i,v)=>{const u=o(v.role);return i[u]=(i[u]??0)+1,i},{}),l=r.filter(i=>o(i.role)===t.ESTUDIANTE),x=l.filter(i=>!!i.matricula).length,g=l.length-x,f=l.length?Math.round(x/l.length*100):0;return{byRole:s,students:l,withMatricula:x,pendingMatricula:g,progress:f}},[r]),d=a.students.slice(0,6),b=[...r].sort((s,l)=>(l.matricula?1:0)-(s.matricula?1:0)).slice(0,10);return m?e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Panel Ejecutivo"}),e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:e.jsx("p",{className:"text-sm text-slate-500",children:"Cargando informacion institucional..."})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400",children:"Rol directivo - IUCA"}),e.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Panel Ejecutivo"}),e.jsx("p",{className:"text-sm text-slate-500 max-w-3xl",children:"Este panel resume la informacion real de las cuentas registradas en la plataforma IUCA. Las cifras se actualizan cada vez que se crea o modifica un usuario desde los procesos administrativos."}),h&&e.jsx("p",{className:"rounded-xl border border-amber-200 bg-amber-50 px-4 py-2 text-sm text-amber-700",children:h})]}),e.jsxs("section",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Usuarios totales"}),e.jsx("p",{className:"text-3xl font-bold text-slate-800",children:r.length}),e.jsx("p",{className:"text-sm text-slate-500",children:"Cuentas activas en el sistema"})]}),e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Alumnos inscritos"}),e.jsx("p",{className:"text-3xl font-bold text-slate-800",children:a.students.length}),e.jsxs("p",{className:"text-sm text-slate-500",children:[a.pendingMatricula," sin matricula emitida"]})]}),e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Avance de matriculas"}),e.jsxs("p",{className:"text-3xl font-bold text-iuca-blue-700",children:[a.progress,"%"]}),e.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-slate-100",children:e.jsx("div",{className:"h-2 rounded-full bg-iuca-blue-600",style:{width:`${a.progress}%`}})}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Meta: 100% de alumnos con matricula"})]}),e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Roles operativos"}),e.jsx("p",{className:"text-3xl font-bold text-slate-800",children:(a.byRole[t.ADMINISTRATIVO]??0)+(a.byRole[t.DOCENTE]??0)+(a.byRole[t.BIBLIOTECARIO]??0)}),e.jsx("p",{className:"text-sm text-slate-500",children:"Administrativos, docentes y biblioteca"})]})]}),e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Distribucion por rol"}),e.jsx("h2",{className:"text-2xl font-semibold text-slate-800",children:"Roles registrados"})]}),e.jsx("span",{className:"text-xs text-slate-500",children:"Actualizado en tiempo real"})]}),e.jsx("div",{className:"mt-4 grid gap-3 md:grid-cols-3 xl:grid-cols-5",children:Object.values(t).map(s=>e.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-slate-50 p-4",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:j[s]}),e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:a.byRole[s]??0}),e.jsx("p",{className:"text-xs text-slate-500",children:s===t.ESTUDIANTE?"Usuarios finales":"Personal interno"})]},s))})]}),e.jsxs("section",{className:"grid gap-6 lg:grid-cols-[1.1fr_0.9fr]",children:[e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Muestra reciente"}),e.jsx("h2",{className:"text-2xl font-semibold text-slate-800",children:"Alumnos inscritos"})]}),e.jsxs("span",{className:"text-xs text-slate-500",children:[d.length," mostrados"]})]}),e.jsx("div",{className:"mt-4 space-y-3",children:d.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No hay alumnos registrados todavia."}):d.map(s=>e.jsx("div",{className:"rounded-2xl border border-slate-100 bg-slate-50 p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-800",children:s.name}),e.jsx("p",{className:"text-xs text-slate-500",children:s.email})]}),e.jsxs("div",{className:"text-right text-xs text-slate-500",children:[e.jsx("p",{className:"uppercase tracking-[0.3em]",children:"Matricula"}),e.jsx("p",{className:"text-sm font-semibold text-slate-800",children:s.matricula??"Pendiente"})]})]})},s.id))})]}),e.jsxs("article",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Validacion"}),e.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Pendientes por matricula"})]}),e.jsxs("span",{className:"text-xs text-slate-500",children:[a.pendingMatricula," alumnos"]})]}),a.pendingMatricula===0?e.jsx("p",{className:"mt-4 text-sm text-slate-500",children:"Todos los estudiantes cuentan con matricula asignada."}):e.jsx("ul",{className:"mt-4 space-y-3",children:a.students.filter(s=>!s.matricula).slice(0,6).map(s=>e.jsxs("li",{className:"rounded-2xl border border-amber-100 bg-amber-50 px-4 py-3",children:[e.jsx("p",{className:"text-sm font-semibold text-amber-900",children:s.name}),e.jsx("p",{className:"text-xs text-amber-700",children:s.email}),e.jsx("p",{className:"text-xs text-amber-700 mt-1",children:"Accion sugerida: confirmar datos y emitir matricula."})]},s.id))})]})]}),e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Directorio completo"}),e.jsx("h2",{className:"text-2xl font-semibold text-slate-800",children:"Usuarios registrados"})]}),e.jsxs("span",{className:"text-xs text-slate-500",children:["Total: ",r.length]})]}),e.jsx("div",{className:"mt-4 max-h-[420px] overflow-y-auto rounded-2xl border border-slate-100",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs uppercase tracking-[0.3em] text-slate-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Nombre"}),e.jsx("th",{className:"px-4 py-3",children:"Correo"}),e.jsx("th",{className:"px-4 py-3",children:"Rol"}),e.jsx("th",{className:"px-4 py-3",children:"Matricula"})]})}),e.jsx("tbody",{children:b.map(s=>e.jsxs("tr",{className:"border-t border-slate-100",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-slate-800",children:s.name}),e.jsx("td",{className:"px-4 py-3 text-slate-600",children:s.email}),e.jsx("td",{className:"px-4 py-3 text-slate-600",children:j[o(s.role)]}),e.jsx("td",{className:"px-4 py-3 text-slate-600",children:s.matricula??"Pendiente"})]},s.id))})]})})]})]})};export{R as default};
