import{u as v,f as w,e as a,R as y,k,Q as A,j as e}from"./index-C4aqFuzc.js";const P=()=>{const{user:s}=v(),{currentCredits:x}=w(),[n,m]=a.useState(null),[l,o]=a.useState([]),c=(s==null?void 0:s.role)===y.ESTUDIANTE,u=a.useMemo(()=>{const t=[],i=[...l].sort((r,N)=>new Date(N.submittedAt).getTime()-new Date(r.submittedAt).getTime());i[0]&&t.push({title:"Última entrega",date:new Date(i[0].submittedAt).toLocaleString(),status:i[0].title});const d=i.find(r=>r.status==="calificado");return d&&t.push({title:"Última calificación",date:new Date(d.submittedAt).toLocaleString(),status:`Nota: ${d.grade??"--"}`}),t.push({title:"Rol en IUCA",date:new Date().toLocaleDateString(),status:(s==null?void 0:s.role)||"---"}),t},[l,s==null?void 0:s.role]),h=a.useMemo(()=>"Perfil verificado. Datos cargados desde tu sesión y entregas registradas.",[]);if(a.useEffect(()=>{!s||!c||k(s.id).then(m)},[s,c]),a.useEffect(()=>{s&&A(s.id).then(o).catch(()=>o([]))},[s]),!s)return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Perfil"}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-md",children:e.jsx("p",{className:"text-slate-600",children:"Cargando perfil..."})})]});const p=[{label:"Nombre completo",value:s.name},{label:"Correo",value:s.email},{label:"Rol",value:s.role},{label:"Matricula",value:s.matricula??"No asignada"}],g=l.length,b=l.filter(t=>t.status!=="calificado").length,f=l.filter(t=>t.status==="calificado").length,j=[{label:"Créditos activos",value:x??"---",accent:"text-iuca-green-700"},{label:"Promedio general",value:c?n!==null?n.toFixed(2):"---":"Privado",accent:"text-iuca-blue-700"},{label:"Tareas enviadas",value:g||0,accent:"text-iuca-blue-600"},{label:"Pendientes de calificar",value:b||0,accent:"text-amber-600"},{label:"Calificaciones registradas",value:f||0,accent:"text-emerald-600"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-iuca-green-600 via-iuca-blue-600 to-iuca-blue-500 rounded-3xl p-6 text-white shadow-xl relative overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[1fr_auto] gap-6 items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-white/70",children:"Perfil academico"}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:s.name}),e.jsx("p",{className:"text-sm text-white/80",children:s.email}),e.jsx("p",{className:"text-sm text-white/80 mt-3 max-w-xl",children:h})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center px-4 py-3 bg-white/15 rounded-2xl",children:[e.jsx("span",{className:"text-xs uppercase tracking-wide text-white/70",children:"Matricula"}),e.jsx("span",{className:"text-lg font-semibold",children:s.matricula??"No asignada"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center px-4 py-3 bg-white/15 rounded-2xl",children:[e.jsx("span",{className:"text-xs uppercase tracking-wide text-white/70",children:"Rol"}),e.jsx("span",{className:"text-lg font-semibold",children:s.role})]})]})]}),e.jsx("p",{className:"mt-4 text-xs uppercase tracking-[0.4em] text-white/60",children:"Informacion en modo lectura"})]}),e.jsxs("div",{className:"grid lg:grid-cols-[1.1fr_0.9fr] gap-6",children:[e.jsxs("section",{className:"bg-white p-6 rounded-xl shadow-md space-y-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Tu informacion"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Datos principales de tu cuenta IUCA."})]}),e.jsx("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:p.map(t=>e.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-slate-50 p-4",children:[e.jsx("dt",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:t.label}),e.jsx("dd",{className:"text-base font-semibold text-slate-800 break-words",children:t.value})]},t.label))}),e.jsx("div",{className:"rounded-2xl border border-emerald-100 bg-emerald-50 p-4 text-sm text-emerald-700",children:"Este perfil es informativo; los datos institucionales se actualizan automaticamente desde la Administracion IUCA."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-3",children:"Resumen rapido"}),e.jsx("div",{className:"grid grid-cols-2 gap-3 text-sm text-slate-500",children:j.map(t=>e.jsxs("div",{className:"bg-slate-50 rounded-xl p-3",children:[e.jsx("p",{className:"text-xs uppercase tracking-wider",children:t.label}),e.jsx("p",{className:`text-2xl font-semibold ${t.accent}`,children:t.value})]},t.label))})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-3",children:"Actividad registrada"}),e.jsx("ul",{className:"space-y-3",children:u.map(t=>e.jsxs("li",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-800",children:t.title}),e.jsx("p",{className:"text-xs text-slate-500",children:t.status})]}),e.jsx("span",{className:"text-xs text-slate-400",children:t.date})]},t.title))})]})]})]})]})};export{P as default};
