import{B as i,R as l,J as c,P as d}from"./index-C4aqFuzc.js";const r="http://localhost:4000",f=async e=>(await c()).filter(t=>t.profesorNombre===e).map(t=>({id:t.id,code:t.modulo.codigo,name:t.modulo.nombre,teacher:t.profesorNombre,credits:Math.max(1,Math.round(t.modulo.materias.reduce((n,o)=>n+o.horas,0)/10)),schedule:"Horario según módulo asignado",capacity:30,room:"Por asignar",enrolled:!1,enrolledCount:(t.studentIds||[]).length,prerequisites:[]})),h=async()=>(await i()).filter(s=>s.role===l.ESTUDIANTE),p=async e=>{const t=(await c()).find(n=>n.id===e);return(t==null?void 0:t.studentIds)||[]},g=async(e,s)=>{const n=(await c()).find(a=>a.id===e);if(!n)throw new Error("Asignación no encontrada");const o=new Set(n.studentIds||[]);o.add(s),await d(e,Array.from(o))},w=async(e,s)=>{const n=(await c()).find(a=>a.id===e);if(!n)return;const o=(n.studentIds||[]).filter(a=>a!==s);await d(e,o)},y=async(e,s,t,n)=>{await fetch(`${r}/attendance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({courseId:e,studentId:t,date:s,present:n}),credentials:"include"})},A=async(e,s)=>{const t=await fetch(`${r}/attendance?courseId=${encodeURIComponent(e)}&date=${encodeURIComponent(s)}`,{credentials:"include"});if(!t.ok)throw new Error("Error remoto");const n=await t.json(),o={};return n.forEach(a=>{o[a.student_id]=!!a.present}),o},E=async(e,s,t,n)=>{await fetch(`${r}/attendance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({courseId:e,studentId:t,date:s,present:!0,note:n}),credentials:"include"})},I=async(e,s)=>{const t=await fetch(`${r}/attendance?courseId=${encodeURIComponent(e)}&date=${encodeURIComponent(s)}`,{credentials:"include"});if(!t.ok)throw new Error("Error remoto");const n=await t.json(),o={};return n.forEach(a=>{a.note&&(o[a.student_id]=a.note)}),o},u=async e=>{const s=await fetch(`${r}/attendance?courseId=${encodeURIComponent(e)}`,{credentials:"include"});if(!s.ok)throw new Error("Error remoto");const t=await s.json(),n={};return t.forEach(o=>{const a=o.date;n[a]=n[a]||{},n[a][o.student_id]=!!o.present}),n},R=async e=>{const s=await u(e);return Object.keys(s).sort()};export{g as a,A as b,I as c,R as d,u as e,y as f,p as g,f as h,h as l,w as r,E as s};
